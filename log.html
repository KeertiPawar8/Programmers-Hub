<!DOCTYPE html>
<html>
<head>
	<title>Signup & Login page</title>
	<link rel="stylesheet" type="text/css" href="slide navbar style.css">
    <link rel="stylesheet" href="./log.css">
<link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
</head>
<body>
	<div class="main">  	
		<input type="checkbox" id="chk" aria-hidden="true">

			<div class="signup">
				<form  id="form" method="POST">
					<label for="chk" aria-hidden="true">Sign up</label>
					<input type="text" name="txt" placeholder="User name" required="" id="name">
					<input type="email" name="email" placeholder="Email" required="" id="email">
					<input type="password" name="pswd" placeholder="Password" required="" id="password">
					<button>Sign up</button>
				</form>
			</div>

			<div class="login">
				<form id="form" method="POST">
					<label for="chk" aria-hidden="true">Login</label>
					<input type="email" name="email" placeholder="Email" required="" id="email">
					<input type="password" name="pswd" placeholder="Password" required=""  id="password">
					<button  id="submit">Login</button>
				</form>
			</div>
	</div>
</body>
</html>
<script>
     let myform=document.getElementById("form")
    myform.addEventListener("submit",(e)=>{
    e.preventDefault();
    let email=document.getElementById("email").value
    let password=document.getElementById("password").value
   
    let obj={
        email:email,
        password:password
    }
    console.log(obj)
   

fetch("http://localhost:8080",{
    method:'POST',
    headers:{
        "Content-type":"application/json"
    },
    body:JSON.stringify(obj)
})
.then((res)=>{
    return res.json();
})
.then((res)=>{
    console.log(res);
    localStorage.setItem("token",res.token);
    // window.location.href = "./addposts.html";

})
.catch((err)=>{
console.log(err);
})

})


// =========================================



myform.addEventListener("submit",(e)=>{
    e.preventDefault();
    let name=document.getElementById("name").value
    let email=document.getElementById("email").value
   let password=document.getElementById("password").value




    let obj={
        name:name,
        email:email,
        password:password,
      
        
    }
    console.log(obj)
   

fetch("http://localhost:8080",{
    method:'POST',
    headers:{
        "Content-type":"application/json"
    },
    body:JSON.stringify(obj)
})
.then((res)=>{

    return res.json();
})
.then((data)=>{
    console.log(data);
    // window.location.href = "./login.html";

})
.catch((err)=>{
console.log(err);
})

})
</script>