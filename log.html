<!DOCTYPE html>
<html>
<head>
	<title>Signup & Login page</title>
	<link rel="stylesheet" type="text/css" href="slide navbar style.css">
    <link rel="stylesheet" href="./log.css">
<link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
</head>
<body>
	<div class="main">  	
		<input type="checkbox" id="chk" aria-hidden="true">

			<div class="signup">
				<form  id="form_signup" method="POST">
					<label for="chk" aria-hidden="true">Sign up</label>
					<input type="text" name="txt" placeholder="User name" required="" id="name">
					<input type="email" name="email" placeholder="Email" required="" id="email_signup">
					<input type="password" name="pswd" placeholder="Password" required="" id="password_signup">
					<button type="submit">Sign up</button>
				</form>
			</div>

			<div class="login">
				<form id="form_login" method="POST">
					<label for="chk" aria-hidden="true">Login</label>
					<input type="email" name="email" placeholder="Email" required="" id="email_login">
					<input type="password" name="pswd" placeholder="Password" required=""  id="password_login">
					<button  id="submit" type="submit">Login</button>
				</form>
			</div>
	</div>
</body>
</html>
<script>

     let myform=document.getElementById("form_login")
    myform.addEventListener("submit",async(e)=>{
    e.preventDefault();
    console.log("login okay")
    let email=document.getElementById("email_login").value
    let password=document.getElementById("password_login").value
   
    let obj={
        email:email,

        pass:password
        

    }
    console.log(obj)
   

let data=await fetch("http://localhost:8080/login",{
    method:'POST',
    headers:{
        "Content-type":"application/json"
    },
    body:JSON.stringify(obj)
})

data = await data.json()
console.log(data)
localStorage.setItem("token",JSON.stringify(data.token));
    window.location.href = "./index.html";

})


// =========================================

let myform2=document.getElementById("form_signup")

myform2.addEventListener("submit",async(e)=>{
    e.preventDefault();
    console.log("signup is okay")
    let name=document.getElementById("name").value
    let email=document.getElementById("email_signup").value
   let password=document.getElementById("password_signup").value




    let obj={
        name:name,
        email:email,

    
        pass:password,

      
        
    }
    console.log(obj)
   

let data= await fetch("http://localhost:8080/signup",{
    method:'POST',
    headers:{
        "Content-type":"application/json"
    },
    body:JSON.stringify(obj)
})

data= await data.json();
alert(data.msg)
// .then((res)=>{

//     return res.json();
// })
// .then((res)=>{
//     console.log(res);
//     window.location.href = "./index.html";

// })
// .catch((err)=>{
// console.log(err);
// })

})
</script>